var rmMeetup=angular.module("rmMeetup",["ngSanitize","ngResource"]).config(["$httpProvider",function(a){a.defaults.useXDomain=!0,delete a.defaults.headers.common["X-Requested-With"]}]).value("OauthAccess",{tokenAccess:"",expiresId:""});angular.module("rmMeetup").run(["$templateCache",function(a){"use strict";a.put("component/templates/eventsList.html",'<ul>\n    <li data-ng:repeat="event in events">\n        {{event.name}}\n    </li>\n</ul>'),a.put("component/templates/eventsTable.html",'<table data-ng:if="hasEvents">\n    <thead>\n        <tr class="eventHeaderLine">\n            <th data-ng:repeat="field in fields" class="{{field.field}}Label">\n                {{field.label}}\n            </th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr data-ng:repeat="event in events" class="eventBodyLine">\n            <td data-ng:repeat="field in fields" class="{{field.field}}Value">\n                {{getData(event, field.field)}}\n            </td>\n        </tr>\n    </tbody>\n</table>'),a.put("component/templates/groupsList.html",'<ul>\n    <li data-ng:repeat="group in groups">\n        {{group.name}}\n    </li>\n</ul>'),a.put("component/templates/groupsTable.html",'<table data-ng:if="hasGroups">\n    <thead>\n        <tr class="groupHeaderLine">\n            <th data-ng:repeat="field in fields" class="{{field.field}}Label">\n                {{field.label}}\n            </th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr data-ng:repeat="group in groups" class="groupBodyLine">\n            <td data-ng:model="group.name" data-ng:repeat="field in fields" class="{{field.field}}Value">\n                {{group[field.field]}}\n            </td>\n        </tr>\n    </tbody>\n</table>'),a.put("component/templates/meetupOauth.html","<a  data-ng:transclude>\n</a>")}]),function(){"use strict";function a(){}rmMeetup.controller("rmMeetupOauthController",["$q","$scope","rmMeetupOauthService",a])}(),function(){"use strict";function a(a){var b=function(a,b){a.events=b.results,a.hasEvents=void 0!==a.events&&a.events.length>0},c=function(c){a.getByGroupId(c.accessToken,c.groupId).then(function(a){b(c,a)})},d=function(c){a.getByEventId(c.accessToken,c.eventId).then(function(a){b(c,a)})},e=function(c){a.get(c.accessToken,c.parameters).then(function(a){b(c,a)})},f=function(a){a.groupId?c(a):a.eventId?d(a):a.parameters&&e(a)},g="component/templates/";return{restrict:"E",templateUrl:function(a,b){return"table"===b.type?g+"eventsTable.html":g+"eventsList.html"},transclude:!0,scope:{accessToken:"@",groupId:"@",eventId:"@",parameters:"=",type:"@",fields:"="},link:function(a,b,c){a.events=[],a.hasEvents=!1,a.accessToken?f(a):a.$watch("accessToken",function(b,c){b!==c&&f(a)}),"table"===c.type&&(void 0!==a.fields&&Array.isArray(a.fields)||(a.fields=[{label:"ID of Event",field:"id"},{label:"Name of Event",field:"name"}])),a.getData=function(a,b){for(var c=b.split("."),d=a,e=c[0],f=0;e&&d;)d=d[e],f+=1,e=c[f];return d}}}}rmMeetup.directive("rmMeetupEvents",["rmMeetupEventsService",a])}(),function(){"use strict";function a(a){var b=function(a,b){a.groups=b.results,a.hasGroups=void 0!==a.groups&&a.groups.length>0},c=function(c){a.getById(c.accessToken,c.groupId).then(function(a){b(c,a)})},d=function(c){a.getByTopic(c.accessToken,c.topic).then(function(a){b(c,a)})},e=function(c){a.get(c.accessToken,c.parameters).then(function(a){b(c,a)})},f=function(a){a.groupId?c(a):a.topic?d(a):a.parameters&&e(a)},g="component/templates/";return{restrict:"E",templateUrl:function(a,b){return"table"===b.type?g+"groupsTable.html":g+"groupsList.html"},transclude:!0,scope:{accessToken:"@",groupId:"@",topic:"@",parameters:"=",type:"@",fields:"="},link:function(a,b,c){a.groups=[],a.hasGroups=!1,a.accessToken?f(a):a.$watch("accessToken",function(b,c){b!==c&&f(a)}),"table"===c.type&&(void 0!==a.fields&&Array.isArray(a.fields)||(a.fields=[{label:"ID of Group",field:"id"},{label:"Name of Group",field:"name"}]))}}}rmMeetup.directive("rmMeetupGroups",["rmMeetupGroupService",a])}(),function(){"use strict";function a(a,b,c){var d=function(){var c=500,d=350,e=(screen.height-d)/2,f=(screen.width-c)/2;a.open(b.authorize_uri,"Meetup",["height=",d,",width=",c,",top=",e,",left=",f].join(""))},e=function(){var b="";if(b=window.location.pathname.indexOf("access_token")>=0?window.location.pathname:window.location.hash,b.split("/").length>1&&(b="#"+b.split("/")[1]),b){for(var c=b.substring(1).split("&"),d=c.length,e={},f=/(\S+)=(\S+)/,g=function(a){if(f.test(a)){var b=f.exec(a).splice(1,2);e[b[0]]=b[1]}};d--;)g(c[d]);e.access_token?(a.close(),a.opener.onMeetupAuth(e.access_token,e.expires_in)):e.error&&(a.close(),a.opener.onMeetupDenial(e.error))}},f="component/templates/meetupOauth.html";return{restrict:"E",templateUrl:f,replace:!0,transclude:!0,scope:{refreshToken:"&"},controller:"rmMeetupOauthController",link:function(b,f){a.onMeetupAuth=function(a,d){c.tokenAccess=a,c.expiresIn=d,b.refreshToken&&b.refreshToken({token:a,expiresIn:d})},a.onMeetupDenial=function(a){console.log(a)},e(),f.on("click",function(){d()})}}}rmMeetup.directive("rmMeetupOauth",["$window","rmConsumer","OauthAccess",a])}(),function(){"use strict";rmMeetup.provider("rmConsumer",function(){this.setAuthorizeURI=function(a){this.authorize_uri=a},this.setKey=function(a){this.key=a},this.setSecret=function(a){this.secret=a},this.setRedirectURI=function(a){this.redirect_uri=a},this.$get=function(){return(void 0===this.authorize_uri||""===this.authorize_uri)&&(this.authorize_uri="https://secure.meetup.com/oauth2/authorize/?response_type=token&scope=ageless"),{key:this.key,secret:this.secret,redirect_uri:this.redirect_uri,authorize_uri:this.authorize_uri+"&client_id="+this.key+"&redirect_uri="+this.redirect_uri}}})}(),function(){"use strict";function a(a,b){var c=b("https://api.meetup.com/2/events");return{getByGroupId:function(b,d,e){var f=a.defer();return(null===e||void 0===e)&&(e="upcoming,past,proposed,suggested"),c.get({access_token:b,group_id:d,status:e}).$promise.then(function(a){f.resolve(a)}),f.promise},getByEventId:function(b,d,e){var f=a.defer();return(null===e||void 0===e)&&(e="upcoming,past,proposed,suggested"),c.get({access_token:b,event_id:d,status:e}).$promise.then(function(a){f.resolve(a)}),f.promise},get:function(b,d){var e=a.defer();return d?d.access_token=b:d={access_token:b},c.get(d).$promise.then(function(a){e.resolve(a)}),e.promise}}}rmMeetup.factory("rmMeetupEventsService",["$q","$resource",a])}(),function(){"use strict";function a(a,b){var c=b("https://api.meetup.com/2/groups");return{get:function(b,d){var e=a.defer();return d?d.access_token=b:d={access_token:b},c.get(d).$promise.then(function(a){e.resolve(a)}),e.promise},getById:function(b,d){var e=a.defer();return c.get({access_token:b,group_id:d}).$promise.then(function(a){e.resolve(a)}),e.promise},getByTopic:function(b,d){var e=a.defer();return c.get({access_token:b,topic:d}).$promise.then(function(a){e.resolve(a)}),e.promise}}}rmMeetup.factory("rmMeetupGroupService",["$q","$resource",a])}(),function(){"use strict";function a(a,b){var c=b("https://api.meetup.com/2/member/self?access_token=:access_token",{access_token:"@_access_token"});return{getLoggedMember:function(b){var d=a.defer();return c.get({access_token:b}).$promise.then(function(a){d.resolve(a)}),d.promise}}}rmMeetup.factory("rmMeetupMembersService",["$q","$resource",a])}(),function(){"use strict";function a(a,b,c){b("");return{getOauthAccess:function(){return c}}}rmMeetup.factory("rmMeetupOauthService",["$q","$resource","OauthAccess",a])}(),function(){"use strict";function a(a,b){var c=b("https://api.meetup.com/2/rsvps");return{getByEventId:function(b,d){var e=a.defer();return c.get({access_token:b,event_id:d}).$promise.then(function(a){e.resolve(a)}),e.promise}}}rmMeetup.factory("rmMeetupRSVPsService",["$q","$resource",a])}();